{"version":3,"sources":["components/Form/Form.module.css","components/Modal/Modal.module.css","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css","components/Input.js","components/Button.js","components/Form/Form.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","services/servicesApi.js","App.js","index.js"],"names":["module","exports","Input","className","type","name","value","placeholder","onChange","autoComplete","autoFocus","Button","children","onClick","Form","onSubmit","useState","setValue","s","id","e","preventDefault","trim","toast","warning","inputValue","currentTarget","Searchbar","Header","ImageGalleryItem","item","webformatURL","largeImageURL","src","alt","width","data-largeimg","modalRoot","document","querySelector","Modal","onClose","handleKeyDown","code","console","log","useEffect","window","addEventListener","removeEventListener","createPortal","ModalBackdrop","target","ModalContent","STATUS","ImageGallery","searchQuery","response","setResponse","error","setError","page","setPage","currentSearch","setCurrentSearch","status","setStatus","setLargeImageURL","onCloseModal","setTimeout","prevPage","searchParams","URLSearchParams","q","per_page","image_type","order","url","fetch","then","json","hits","length","Promise","reject","Error","fetchArticles","r","catch","errorMsg","performerFetch","nodeName","largeImage","getAttribute","columnsCountBreakPoints","350","750","gutter","map","LoarMoreBox","LoadMore","href","ToBeginning","size","color","Loader","height","CloseModal","App","setSearchQuery","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,KAAO,mBAAmB,MAAQ,oBAAoB,OAAS,uB,mBCAjFD,EAAOC,QAAU,CAAC,cAAgB,+B,mBCAlCD,EAAOC,QAAU,CAAC,OAAS,4B,kBCA3BD,EAAOC,QAAU,CAAC,aAAe,mCAAmC,OAAS,6BAA6B,WAAa,iCAAiC,YAAc,kCAAkC,YAAc,kCAAkC,SAAW,iC,sGCCpP,SAASC,EAAT,GAAuE,IAAvDC,EAAsD,EAAtDA,UAAWC,EAA2C,EAA3CA,KAAMC,EAAqC,EAArCA,KAAMC,EAA+B,EAA/BA,MAAOC,EAAwB,EAAxBA,YAAaC,EAAW,EAAXA,SACtE,OACI,uBAAOL,UAAWA,EAAWC,KAAMA,EAAMC,KAAMA,EAAMC,MAAOA,EAAOC,YAAaA,EAAaC,SAAUA,EAAUC,aAAa,MAAMC,WAAS,ICFtI,SAASC,EAAT,GAAuD,IAAtCR,EAAqC,EAArCA,UAAWC,EAA0B,EAA1BA,KAAMQ,EAAoB,EAApBA,SAAUC,EAAU,EAAVA,QACvD,OACI,wBAAQV,UAAWA,EAAWC,KAAMA,EAAMS,QAASA,EAAnD,SAA6DD,I,qBCOtD,SAASE,EAAT,GAA2B,IAAZC,EAAW,EAAXA,SAAW,EACXC,mBAAS,IADE,mBAC9BV,EAD8B,KACvBW,EADuB,KAsBrC,OACI,uBAAMd,UAAWe,IAAEJ,KAAMK,GAAG,OAAOJ,SAfvC,SAAsBK,GAClBA,EAAEC,iBAEkB,KAAjBf,EAAMgB,QAMTP,EAAST,GACTW,EAAS,KANLM,IAAMC,QAAQ,qGAWlB,UACI,cAACtB,EAAD,CAAOC,UAAWe,IAAEhB,MAAOE,KAAK,OAAOC,KAAK,SAASC,MAAOA,EAAOC,YAAY,2BAA2BC,SArBlH,SAA2BY,GACvB,IAAMK,EAAaL,EAAEM,cAAcpB,MACnCW,EAASQ,MAoBL,cAACd,EAAD,CAAQR,UAAWe,IAAEP,OAAQP,KAAK,SAASQ,SAAS,c,qBC/BjD,SAASe,EAAT,GAAgC,IAAZZ,EAAW,EAAXA,SAE/B,OACI,wBAAQZ,UAAWe,IAAEU,OAArB,SACI,cAACd,EAAD,CAAMC,SAAUA,M,oECPb,SAASc,EAAT,GAAmC,IAARC,EAAO,EAAPA,KAC/BX,EAAmCW,EAAnCX,GAAIY,EAA+BD,EAA/BC,aAAcC,EAAiBF,EAAjBE,cAEzB,OACI,oBAAa7B,UAAU,mBAAvB,SACI,qBAAKA,UAAU,yBAAyB8B,IAAKF,EAAcG,IAAI,GAAIC,MAAM,OAAOC,gBAAeJ,KAD1Fb,G,qBCAXkB,EAAYC,SAASC,cAAc,eAE1B,SAASC,EAAT,GAAqC,IAArB5B,EAAoB,EAApBA,SAAU6B,EAAU,EAAVA,QAQrC,SAASC,EAActB,GACJ,WAAXA,EAAEuB,MACFC,QAAQC,IAAIzB,EAAEuB,MAWtB,OAnBAG,qBAAU,WAGN,OAFAC,OAAOC,iBAAiB,UAAWN,GAE5B,WAAOK,OAAOE,oBAAoB,UAAWP,OAgBjDQ,uBACH,qBAAK/C,UAAWe,IAAEiC,cAAetC,QAPrC,SAA6BO,GACtBA,EAAEgC,SAAWhC,EAAEM,eACde,KAKJ,SACI,qBAAKtC,UAAWe,IAAEmC,aAAlB,SACKzC,MAEDyB,G,oBCjBViB,EACI,OADJA,EAEO,UAFPA,EAGQ,WAHRA,EAIQ,WAGC,SAASC,EAAT,GAAsC,IAAfC,EAAc,EAAdA,YAAc,EAChBxC,mBAAS,IADO,mBACzCyC,EADyC,KAC/BC,EAD+B,OAEtB1C,mBAAS,MAFa,mBAEzC2C,EAFyC,KAElCC,EAFkC,OAGxB5C,mBAAS,GAHe,mBAGzC6C,EAHyC,KAGnCC,EAHmC,OAIN9C,mBAAS,IAJH,mBAIzC+C,EAJyC,KAI1BC,EAJ0B,OAKpBhD,mBAASsC,GALW,mBAKzCW,EALyC,KAKjCC,EALiC,OAMNlD,mBAAS,IANH,mBAMzCgB,EANyC,KAM1BmC,EAN0B,KA6DhD,SAASC,IACLD,EAAiB,IAGrB,OAzDArB,qBAAU,WACFmB,IAAWX,IACX/B,IAAMoC,MAAN,UAAeA,IACfO,EAAUZ,MAEf,CAACK,EAAOM,IAEXnB,qBAAU,WACNkB,EAAiBR,GACjBE,EAAY,IACZI,EAAQ,KACT,CAACN,IAEJV,qBAAU,WAEgB,KAAlBiB,GAQR,SAAwBP,EAAaK,GAEjCK,EAAUZ,GAEVe,YAAW,YCxDJ,SAAuBb,EAAaK,EAAMS,GACrD,IAAMC,EAAe,IAAIC,gBAAgB,CACrCC,EAAGjB,EACHK,KAAMA,EACNa,SAAU,GACVC,WAAY,QACZC,MAAO,YAGLC,EAAG,UAXC,2BAWD,gBAZG,qCAYH,YAAiCN,GAE1C,OAAOO,MAAMD,GAAKE,MAAK,SAAAtB,GAAQ,OAAIA,EAASuB,UAAQD,MAAK,SAAAtB,GAErD,OAA4B,IAAzBA,EAASwB,KAAKC,OACNC,QAAQC,OAAO,IAAIC,MAAJ,yKAGnB5B,EAASwB,SDwCZK,CAAc9B,EAAaK,GAAMkB,MAAK,SAAAQ,GAClC7B,EAAY,GAAD,mBAAKD,GAAL,YAAkB8B,KAC7BrB,EAAUZ,MAEbkC,OAAM,SAAAC,GACH7B,EAAS6B,GACTvB,EAAUZ,QAEf,KAjBHoC,CAAe3B,EAAeF,KAE/B,CAACA,EAAME,IAqCN,gCACK,oBAAI5D,UAAWe,IAAEqC,aAAc1C,QAfxC,SAA6BO,GACzB,GAA0B,QAAtBA,EAAEgC,OAAOuC,SAAb,CAIA,IAAMC,EAAaxE,EAAEgC,OAAOyC,aAAa,iBACzC1B,EAAiByB,KASZ,SAEK3B,IAAWX,GAEZ,cAAC,oBAAD,CAAmBwC,wBAAyB,CAACC,IAAK,EAAGC,IAAK,GAA1D,SACI,cAAC,IAAD,CAASC,OAAO,OAAhB,SACKxC,EAASyC,KAAI,SAAApE,GAAI,OAAI,cAACD,EAAD,CAAkBC,KAAMA,aAO1DmC,IAAWX,GACX,qCACI,qBAAKnD,UAAWe,IAAEiF,YAAlB,SACI,cAACxF,EAAD,CAAQR,UAAWe,IAAEkF,SAAUhG,KAAK,SAASQ,SAAS,YAAYC,QAnCnF,WACIiD,EAAQD,EAAO,QAoCN,mBAAGwC,KAAK,QAAQlG,UAAWe,IAAEoF,YAA7B,SAA2C,cAAC,IAAD,CAAkBC,KAAM,OAAQC,MAAO,iBAItFvC,IAAWX,GACP,cAACd,EAAD,UACI,cAAC,IAAD,CAAQrC,UAAWe,IAAEuF,OAAQrG,KAAK,SAASoG,MAAM,UAAUE,OAAQ,GAAIvE,MAAO,OAIpE,KAAlBH,GACI,eAACQ,EAAD,CAAOC,QAAS2B,EAAhB,UACI,qBAAKnC,IAAKD,IACV,cAACrB,EAAD,CAAQR,UAAWe,IAAEyF,WAAYvG,KAAK,SAASS,QAASuD,EAAcxD,SAAU,cAAC,IAAD,CAAW2F,KAAM,OAAQC,MAAO,oBElGtHI,MAjBf,WAAgB,IAAD,EAEyB5F,mBAAS,IAFlC,mBAENwC,EAFM,KAEOqD,EAFP,KAQb,OACE,qCACE,cAAClF,EAAD,CAAWZ,SANf,SAA0BT,GACxBuG,EAAevG,MAMb,cAACiD,EAAD,CAAcC,YAAaA,IAC3B,cAAC,IAAD,CAAgBsD,SAAS,YAAYC,UAAW,W,MCdtDC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF5E,SAAS6E,eAAe,W","file":"static/js/main.a6775543.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Form\":\"Form_Form__NwsvM\",\"Input\":\"Form_Input__3llrw\",\"Button\":\"Form_Button__2Ei0U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ModalBackdrop\":\"Modal_ModalBackdrop__1Eww8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Searchbar_Header__3ogLq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__JweWX\",\"Loader\":\"ImageGallery_Loader__1WcGj\",\"CloseModal\":\"ImageGallery_CloseModal__1GaAG\",\"ToBeginning\":\"ImageGallery_ToBeginning__1nrhm\",\"LoarMoreBox\":\"ImageGallery_LoarMoreBox__2aWUP\",\"LoadMore\":\"ImageGallery_LoadMore__1kEAx\"};","import PropTypes from 'prop-types';\r\n\r\nexport default function Input({className, type, name, value, placeholder, onChange}) {\r\n    return (\r\n        <input className={className} type={type} name={name} value={value} placeholder={placeholder} onChange={onChange} autoComplete='off' autoFocus/>\r\n    )\r\n}\r\n\r\nInput.propTypes = {\r\n    className: PropTypes.string,\r\n    type: PropTypes.string.isRequired,\r\n    name: PropTypes.string.isRequired,\r\n    value: PropTypes.string.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    placeholder: PropTypes.string,\r\n}","import PropTypes from 'prop-types';\r\n\r\nexport default function Button({className, type, children, onClick}) {\r\n    return (\r\n        <button className={className} type={type} onClick={onClick}>{children}</button>\r\n    )\r\n}\r\n\r\nButton.propTypes = {\r\n    className: PropTypes.string,\r\n    type: PropTypes.string.isRequired,\r\n    children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object,), PropTypes.element, PropTypes.string,]),\r\n    onClick: PropTypes.func,\r\n}","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport Input from '../Input';\r\nimport Button from '../Button';\r\n\r\nimport s from './Form.module.css';\r\n\r\nexport default function Form({onSubmit}) {\r\n    const [value, setValue] = useState('');\r\n\r\n    function handleInputChange(e) {\r\n        const inputValue = e.currentTarget.value;\r\n        setValue(inputValue);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        \r\n        if(value.trim() === '') {\r\n            toast.warning('Вы ничего не ввели...');\r\n            \r\n            return\r\n        }\r\n\r\n        onSubmit(value);\r\n        setValue('');\r\n    }\r\n\r\n\r\n    return (\r\n        <form className={s.Form} id='form' onSubmit={handleSubmit}> \r\n            <Input className={s.Input} type='text' name='search' value={value} placeholder='Search images and photos' onChange={handleInputChange}/> \r\n            <Button className={s.Button} type='submit' children='Search' />\r\n        </form>\r\n    )\r\n}\r\n\r\nForm.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,  \r\n    children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object,), PropTypes.element,])  \r\n}","import PropTypes from 'prop-types';\r\n\r\nimport Form from '../Form/Form';\r\nimport s from './Searchbar.module.css';\r\n\r\nexport default function Searchbar({onSubmit}) {\r\n    \r\n    return (\r\n        <header className={s.Header}>\r\n            <Form onSubmit={onSubmit}/>\r\n        </header>\r\n    )\r\n}\r\n\r\nSearchbar.propTypes = {\r\n    onSubmit: PropTypes.func,    \r\n}","import PropTypes from 'prop-types';\r\n\r\nexport default function ImageGalleryItem({item}) {\r\n    const {id, webformatURL, largeImageURL} = item;\r\n\r\n    return (\r\n        <li key={id} className=\"ImageGalleryItem\" >\r\n            <img className=\"ImageGalleryItem-image\" src={webformatURL} alt=\"\"  width='100%' data-largeimg={largeImageURL}/>\r\n        </li>\r\n    )\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n    item: PropTypes.object.isRequired,\r\n}\r\n\r\n","import { useEffect } from 'react';\r\nimport {createPortal} from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default function Modal({children, onClose}) {\r\n    \r\n    useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown)\r\n\r\n        return () => {window.removeEventListener('keydown', handleKeyDown)}\r\n    })\r\n\r\n    function handleKeyDown(e) {\r\n        if (e.code === 'Escape') {\r\n            console.log(e.code);\r\n            // onClose()\r\n        }\r\n    }\r\n\r\n    function handleClickBackdrop(e)  {\r\n        if(e.target === e.currentTarget) {\r\n            onClose()\r\n        }\r\n    }\r\n\r\n    return createPortal(\r\n        <div className={s.ModalBackdrop} onClick={handleClickBackdrop}>\r\n            <div className={s.ModalContent}>\r\n                {children}  \r\n            </div>\r\n        </div>, modalRoot)\r\n\r\n}\r\n\r\nModal.propTypes = {\r\n    children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object,), PropTypes.element]),\r\n    onClose: PropTypes.func,\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport Loader from 'react-loader-spinner';\r\nimport Masonry, {ResponsiveMasonry} from \"react-responsive-masonry\";\r\nimport { IoMdClose } from \"react-icons/io\"\r\nimport { AiOutlineArrowUp } from 'react-icons/ai';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\r\n\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\nimport Modal from '../Modal/Modal';\r\nimport Button from '../Button';\r\n\r\nimport fetchArticles from '../../services/servicesApi';\r\nimport s from \"./ImageGallery.module.css\";\r\n \r\nconst STATUS = {\r\n    IDLE: 'idle',\r\n    PENDING: 'pending',\r\n    RESOLVED: 'resolved',\r\n    REJECTED: 'rejected',\r\n}\r\n\r\nexport default function ImageGallery({searchQuery}) {\r\n    const [response, setResponse] = useState([]);\r\n    const [error, setError] = useState(null);\r\n    const [page, setPage] = useState(1);\r\n    const [currentSearch, setCurrentSearch] = useState('');\r\n    const [status, setStatus] = useState(STATUS.IDLE);\r\n    const [largeImageURL, setLargeImageURL] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (status === STATUS.REJECTED) {\r\n            toast.error(`${error}`);\r\n            setStatus(STATUS.IDLE);\r\n        }\r\n    }, [error, status]);\r\n\r\n    useEffect(() => {\r\n        setCurrentSearch(searchQuery);\r\n        setResponse([]);\r\n        setPage(1);\r\n    }, [searchQuery]);\r\n\r\n    useEffect(() => {\r\n\r\n        if (currentSearch === '') {\r\n            return\r\n        }\r\n\r\n        performerFetch(currentSearch, page);\r\n\r\n    }, [page, currentSearch]);\r\n\r\n    function performerFetch(searchQuery, page) {\r\n\r\n        setStatus(STATUS.PENDING)\r\n\r\n        setTimeout(() => {\r\n            fetchArticles(searchQuery, page).then(r => {\r\n                setResponse([...response, ...r]);\r\n                setStatus(STATUS.RESOLVED);\r\n            })\r\n            .catch(errorMsg => {\r\n                setError(errorMsg);\r\n                setStatus(STATUS.REJECTED);\r\n            });\r\n        }, 500)\r\n        \r\n    }\r\n\r\n    function onLoadMore() {\r\n        setPage(page + 1);\r\n    }\r\n\r\n    function onShowLargeImgModal(e) {\r\n        if (e.target.nodeName !== 'IMG') {\r\n            return\r\n        }\r\n        \r\n        const largeImage = e.target.getAttribute('data-largeimg');\r\n        setLargeImageURL(largeImage);\r\n    }\r\n\r\n    function onCloseModal() {\r\n        setLargeImageURL(''); \r\n    }\r\n\r\n    return (\r\n        <div>\r\n             <ul className={s.ImageGallery} onClick={onShowLargeImgModal}>\r\n             \r\n                 {status !== STATUS.IDLE && \r\n\r\n                 <ResponsiveMasonry columnsCountBreakPoints={{350: 1, 750: 2}}>\r\n                     <Masonry gutter='30px'>\r\n                         {response.map(item => <ImageGalleryItem item={item}/>)}\r\n                     </Masonry> \r\n                 </ResponsiveMasonry>                  \r\n                 }\r\n\r\n            </ul>\r\n            \r\n            {status === STATUS.RESOLVED &&  \r\n             <>\r\n                 <div className={s.LoarMoreBox}>\r\n                     <Button className={s.LoadMore} type='button' children=\"Load More\" onClick={onLoadMore}/>  \r\n                 </div>          \r\n                 <a href=\"#form\" className={s.ToBeginning }><AiOutlineArrowUp size={'30px'} color={'#ffffff'} /></a>\r\n             </>     \r\n            }\r\n\r\n            {status === STATUS.PENDING && \r\n                 <Modal>\r\n                     <Loader className={s.Loader} type=\"Hearts\" color=\"#00BFFF\" height={80} width={80} />\r\n                 </Modal>\r\n            }\r\n\r\n            {largeImageURL !== '' && \r\n                 <Modal onClose={onCloseModal}>\r\n                     <img src={largeImageURL}></img>\r\n                     <Button className={s.CloseModal} type='button' onClick={onCloseModal} children={<IoMdClose size={'30px'} color={'#ffffff'}/>}/>\r\n                 </Modal>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nImageGallery.propTypes = {\r\n    searchQuery: PropTypes.string.isRequired,\r\n}\r\n","const API_KEY = '19085277-779e4bd4c925c04676eaaf904';\r\nconst BASE_URL = `https://pixabay.com/api/`;\r\n\r\nexport default function fetchArticles(searchQuery, page, prevPage) {\r\n    const searchParams = new URLSearchParams({\r\n        q: searchQuery,\r\n        page: page,\r\n        per_page: 12,\r\n        image_type: 'photo',\r\n        order: 'popular',\r\n    })\r\n\r\n    const url = `${BASE_URL}?key=${API_KEY}&${searchParams}`;\r\n\r\n    return fetch(url).then(response => response.json()).then(response => {\r\n        \r\n        if(response.hits.length === 0) {\r\n            return Promise.reject(new Error(`Некоректные параметры запроса`))\r\n        }\r\n\r\n        return response.hits;\r\n    })\r\n}","import { useState } from 'react';\nimport { ToastContainer } from 'react-toastify';\n\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery'\n\n\nfunction App() {\n\n  const [searchQuery, setSearchQuery] = useState('');\n\n  function handleFormSubmit(value) {\n    setSearchQuery(value);\n  }\n\n  return (\n    <>\n      <Searchbar onSubmit={handleFormSubmit} />\n      <ImageGallery searchQuery={searchQuery} />\n      <ToastContainer position='top-right' autoClose={2500}/>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}